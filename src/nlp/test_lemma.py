from typing import List, Dict, Any
import spacy
import re
from collections import Counter
import logging

logger = logging.getLogger(__name__)

str_content =  "Nous sommes là pour vousécouter Prévoir vos obsèques Organiser et/ou financer vos obsèques à l'avance, pour préserver vos proches. Organiser des obsèques Au moment du décès d’un proche, préparer les obsèques et la cérémonie. Rendre hommage Entretenir le souvenir à travers une sépulture ou un geste d’hommage. Pour votre animal Offrir un adieu digne et respectueux à votre animal de compagnie.\n\nC’est le cœur de notre mission.\n\nDepuis plus de 35 ans, les femmes et les hommes de Roc Eclerc répondent présents à la question :« Qui est là pour moi ? ».\n\nPartout en France, grâce à l’implication et au professionnalisme de tous nos collaborateurs, nous nous engageons à tenir, plus que jamais, cette promesse simple et essentielle :Roc Eclerc. Là, pour vous.\n\nEn savoir plus\n\n+ de 35 ans de savoir-faire\n\naux côtés des familles, qui nous permettent de répondre toujours mieux à vos attentes.\n\n+ de 1 000 collaborateurs\n\ntous animés par la même volonté : être à votre écoute pour vous guider et vous conseiller.\n\n+ de 350 agences\n\ndans toute la France, pour vous apporter un service de qualité et de proximité. Nos métiers, à vos côtés Conseillers funéraires, maîtres de cérémonie, chauffeurs-porteurs, marbriers... tous les jours, nos équipes sont au service des familles.\n\nJuliette\n\nConseillère funéraire\n\nBandiougou\n\nMaître de cérémonie\n\nJonathan\n\nChauffeur-porteur Formalités après décès Courriers aux organismes publics et privés, résiliation et transfert des contrats et abonnements, recherche des éventuels capitaux à débloquer, identification et fermeture des comptes numériques : nous vous libérons de toutes les démarches administratives après décès, et vous aidons à faire valoir vos droits. Tous nos guides et conseils Assurance obsèques : devis en ligne Définir sereinement ses volontés funéraires, comparer les formules d’assurance et les contrats obsèques, estimer le juste montant du capital garanti nécessaire… autant de raisons qui font de la demande de devis une étape préalable à la souscription d’un contrat de prévoyance. À quel âge souscrire une assurance obsèques ? Quel que soit l’âge auquel vous y pensez, les conseillers vous accompagnent dans cette démarche de prévoyance visant, notamment, à préserver vos proches des contraintes organisationnelles et/ou financières des obsèques. Focus sur cette interrogation fréquente autour de l’« âge idéal » pour adhérer à un contrat obsèques. Témoignage : « J’ai organisé mes funérailles à 55 ans » Préparer ses obsèques peut sembler fou d’autant plus dans la fleur de l’âge, quand nous sommes encore jeune et en bonne santé. Pourtant, de plus en plus de personnes dans la cinquantaine y réfléchissent et sautent le pas. Nos réponses aux questions les plus fréquentes Vous trouverez ici nos réponses aux questions fréquentes sur Roc Eclerc et nos services,l’accompagnement de nos conseillers. Quand et comment contacter un conseiller Roc Eclerc ? Nos conseillers Roc Eclerc sont à même de vous accompagner dès les premiers instants après le décès d'un parent ou d'un proche. Ils sont là pour vous : pour vous écouter et vous accompagner dans ces circonstances particulières d'un deuil.\n\nNous vous invitons à contacter nos équipes : celles-ci sont joignables 24 heures sur 24 et 7 jours sur 7 afin de répondre aux familles confrontées à uneurgence décès. La demande de devis est-elle gratuite ? Nos conseillers Roc Eclerc établissent, sur simple demande, undevis personnalisé, clair et détaillé. Devis obsèques, devis marbrerie funéraire oudevis prévoyance obsèques: avec Roc Eclerc, c'est gratuit et sans engagement.\n\nVous pouvez solliciter votre conseiller en agence de pompes funèbres ou adresser votre demande directement sur Roc Eclerc. Un professionnel vous répond dans les meilleurs délais. Le devis Roc Eclerc vous permet d'obtenir une estimation, juste et précise, des tarifs pour les services et prestations demandés. Pourquoi faire appel à une entreprise de pompes funèbres ? En France, le recours à uneentreprise de pompes funèbresest obligatoire après un décès.\n\nNos conseillers Roc Eclerc vous accompagnent ainsi, en cas de décès, dans l’organisation des obsèqueset pour toutes les prestations liées aux funérailles (fourniture du cercueil et de l’urne cinéraire, transport du corps avant et après la mise en bière, soins de conservation et toilette mortuaire, formalités administratives…).\n\nPour ce faire, nos agences de pompes funèbres Roc Eclerc s’appuient sur des hommes et des femmes d’expérience, compétents et bienveillants à la fois. Nous saurons vous conseiller et vous assister au mieux, à chaque étape (pour la déclaration du décès à la mairie, la préparation de la cérémonie civile ou religieuse, la conception de faire-part de décès…).\n\nNotre savoir-faire, c’est aussi un accompagnement et des services de qualité enprévoyance obsèques,marbrerieet articles funéraires. N’hésitez pas à contacter nos conseillers Roc Eclerc, pour tout renseignement oudemande de devis obsèques, en recherchant votre agence de pompes funèbres à proximité. Trouver vos agences de pompes funèbres"

def get_lemmatized_tokens(doc: spacy.tokens.Doc) -> List[str]:
    """Extract lemmatized tokens, excluding stop words and punctuation"""
    return [
        token.lemma_.lower() for token in doc
        if not token.is_stop and not token.is_punct and not token.is_space
        and len(token.lemma_) > 1
    ]

if __name__ == "__main__":
    nlp = spacy.load("fr_core_news_md")
    doc = nlp(str_content)
    print(get_lemmatized_tokens(doc))